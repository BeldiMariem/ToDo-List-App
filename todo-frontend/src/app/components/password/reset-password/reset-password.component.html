<div class="login-page">
  <div class="login-left">
    <h1>Create new password</h1>
    <p class="subtitle">Your new password must be different from previous used passwords</p>

    @if (message) {
    <div class="error-message" [class.success]="isSuccess">
      <i class="fas" [class.fa-exclamation-circle]="!isSuccess" [class.fa-check-circle]="isSuccess"></i>
      {{ message }}
    </div>
    }

    <form (ngSubmit)="onSubmit()" #resetPasswordForm="ngForm">
      <div class="form-field">
        <label for="password">New Password</label>
        <input id="password" type="password" [(ngModel)]="newPassword" name="password" placeholder="Enter your new password" required
          [class.error]="showPasswordError" (input)="clearErrors()" />
        @if (showPasswordError) {
        <div class="field-error">
          <i class="fas fa-exclamation-triangle"></i>
          Password is required
        </div>
        }
      </div>

      <div class="form-field">
        <label for="confirmPassword">Confirm Password</label>
        <input id="confirmPassword" type="password" [(ngModel)]="confirmPassword" name="confirmPassword" 
          placeholder="Confirm your new password" required [class.error]="showConfirmError" (input)="clearErrors()" />
        @if (showConfirmError) {
        <div class="field-error">
          <i class="fas fa-exclamation-triangle"></i>
          {{ confirmError }}
        </div>
        }
      </div>

      <button type="submit" class="login-button" [disabled]="isLoading">
        @if (!isLoading) {
        <span>Reset Password</span>
        }
        @if (isLoading) {
        <span>Resetting...</span>
        }
      </button>

      <div class="signup-prompt">
        Remember your password?
        <a routerLink="/login">Sign in</a>
      </div>
    </form>
  </div>

  <div class="login-right">
    <img
      src="https://media.istockphoto.com/id/1219250750/vector/online-registration-and-sign-up-concept-people-signing-up-or-login-to-online-account-with.jpg?s=612x612&w=0&k=20&c=1IEI_a33YhMHcZorJNzA5ECND__5WiILMHErwlWsu6E="
      alt="Password Reset Illustration" class="illustration" />
  </div>
</div>